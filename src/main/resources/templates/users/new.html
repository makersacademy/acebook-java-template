<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Signup</title>

        <script>
            function handleImage(input) {
                let file = input.files[0];
                let reader = new FileReader();
                reader.readAsDataURL(file);

                reader.onload = () => {
                    document.getElementById("fileData").value = reader.result;
                };

                reader.onerror = () => {
                    alert(reader.error);
                }
            }
        </script>
    </head>
    <body>
        <form action="#" th:action="@{/users}" th:object="${user}" method="post">
            <p>Username: <input type="text" th:field="*{username}" required /></p>
            <p>Password: <input type="password" th:field="*{password}" required /></p>
            <p>Profile Picture: <input type="file" id="file" accept="image/*" onChange="handleImage(this)" th:field="*{imageUrl}" required /></p>
            <input type="hidden" id="fileData" name="fileData" />
            <p><input type="submit" value="Submit" id="submit"/> <input type="reset" value="Reset" /></p>
        </form>
    </body>
</html>