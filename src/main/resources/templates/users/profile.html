<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      xmlns:text-decoration="http://www.w3.org/1999/xhtml">

<head lang="en">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acebook</title>
    <link rel="stylesheet" href="/css/main.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
</head>

<body>
<!-- header starts -->
<div class="header">
    <div class="header__left">
        <a href="/login"> <img alt="" src="img/logo3.png"/></a>
        <div class="header__input">
            <span class="material-icons"> search </span>
            <input type="text" placeholder="Search Acebook" />
        </div>
    </div>

    <div class="header__middle">
        <div class="header__option active">
            <a href="/posts">
            <span class="material-icons"> home </span></a>
        </div>
        <div class="header__option">
            <span class="material-icons"> flag </span>
        </div>
        <div class="header__option">
            <span class="material-icons"> subscriptions </span>
        </div>
        <div class="header__option">
            <span class="material-icons"> storefront </span>
        </div>
        <div class="header__option">
            <span class="material-icons"> supervised_user_circle </span>
        </div>
    </div>

    <div class="header__right">
        <div class="header__info">
                    <img class="user__avatar" th:style="user__avatar" th:src="${profile.getuserimage()}"
                         alt="" />
            <!--                    Nav-bar USERNAME start-->
            <h4>
                <div sec:authorize="isAuthenticated()">
                    <span sec:authentication="name"></span>
                </div>
            </h4>
            <!--                    Nav-bar USERNAME ends-->
        </div>
        <span class="material-icons"> add </span>
        <span class="material-icons"> forum </span>
        <span class="material-icons"> notifications_active </span>
        <span class="material-icons"> expand_more </span>

    </div>
</div>
<!-- header ends -->

<!-- main body starts -->
<div class="main__body">
    <!-- sidebar starts -->
    <div class="sidebar">
        <div class="sidebarRow">
                    <img class="user__avatar" th:style="user__avatar" th:src="${profile.getuserimage()}"
                         alt="" />
            <!--                    Side-bar USERNAME start-->
            <h4>
                <div sec:authorize="isAuthenticated()">
                    <span sec:authentication="name"></span>
                </div>
            </h4>
            <!--                    Side-bar USERNAME ends-->
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> emoji_flags </span>
            <h4>Pages</h4>
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> people </span>
            <h4>Friends</h4>
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> group </span>
            <h4>Groups</h4>
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> access_time </span>
            <h4>Memories</h4>
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> chat </span>
            <h4>Messenger</h4>
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> library_books </span>
            <h4>News</h4>
        </div>


        <div class="sidebarRow">
            <span class="material-icons"> storefront </span>
            <h4>Marketplace</h4>
        </div>

        <div class="sidebarRow">
            <span class="material-icons"> video_library </span>
            <h4>Watch</h4>
        </div>
        <div class="sidebarRow">
            <a href="/logout">
                <span class="material-icons"> exit_to_app </span>
            </a>
            <h4><a style="text-decoration:none; color:black;" href="/logout">Log Out </a></h4>

        </div>


    </div>
    <!-- sidebar ends -->

    <!-- feed starts -->
    <div class="feed">
        <h4 class="fri_title">People you may know</h4>
        <div class="storyReel">
            <!-- story starts -->
            <div style="
              background-image: url('https://i.pinimg.com/originals/ce/b2/30/ceb2308fdd55f9bbee211e2820eb198b.jpg');
            " class="story">
                <a th:href="@{/users/{username}(username=${users.get(0).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(0).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(0).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->

            <!-- story starts -->
            <div style="
              background-image: url('https://toppng.com/uploads/preview/beige-solid-background-115700857125hfvjfpmir.jpg');
            " class="story">
                <a th:href="@{/users/{username}(username=${users.get(1).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(1).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(1).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->

            <!-- story starts -->
            <div style="
              background-image: url('https://cdn.wallpapersafari.com/25/35/08QE74.jpg');
            " class="story">
                <a th:href="@{/users/{username}(username=${users.get(2).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(2).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(2).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->

            <!-- story starts -->
            <div style="
              background-image: url('https://www.pngmagic.com/product_images/marigold-color-solid-color-background.jpg');
            " class="story">
                <a th:href="@{/users/{username}(username=${users.get(3).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(3).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(3).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->

            <!-- story starts -->
            <div style="
              background-image: url('https://www.solidbackgrounds.com/images/1920x1080/1920x1080-red-solid-color-background.jpg');
            " class="story">
                <a th:href="@{/users/{username}(username=${users.get(4).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(4).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(4).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->

            <!-- story starts -->
            <div style="
              background-image: url('https://pmkitchens.com/wp-content/uploads/2018/04/p_Solid_Grey_PSOLGRYM24.jpg');
            " class="story">
                <a th:href="@{/users/{username}(username=${users.get(5).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(5).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(5).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->
            <!-- story starts -->
            <div style="
                background-image: url('https://wallpaperaccess.com/full/1756496.jpg');
                " class="story">
                <a th:href="@{/users/{username}(username=${users.get(6).getUsername()})}">
                    <img class="user__avatar story__avatar" th:style="story__avatar"
                         th:src="${users.get(6).getuserimage()}" alt="" />
                    <h4 th:text="${users.get(6).getUsername()}"></h4></a>
            </div>
            <!-- story ends -->

        </div>

        <!-- message sender starts -->
        <!--        <form action="#" th:action="@{/posts}" th:object="${post}" method="post">-->
        <!--            <p>Content: <input type="text" th:field="*{content}" /></p>-->
        <!--            <p><input type="submit" value="Submit" /> <input type="reset" value="Reset" /></p>-->
        <!--        </form>-->
        <div class="messageSender">
            <div class="messageSender__top">
                <img class="user__avatar" th:style="user__avatar" th:src="${profile.getuserimage()}"
                     alt="" />
                <span th:if="${#authentication.getName()} == ${user.getUsername()}">

                <form method="POST" th:action="@{/users/{username}/upload(username=${user.getUsername()})}" enctype="multipart/form-data">
                <input type="file" name="file" /><br/><br/>
                <input type="submit" value="Submit" />
                </form>
                </span>


            </div>
            <div class="messageSender__bottom">
                <div class="messageSender__option">
                    <span style="color: red" class="material-icons"> videocam </span>
                    <h3>Live</h3>
                </div>

                <div class="messageSender__option">
                    <span style="color: green" class="material-icons"> photo_library </span>
                    <h3>Photo</h3>
                </div>

                <div class="messageSender__option">
                    <span style="color: orange" class="material-icons"> insert_emoticon </span>
                    <h3>Feeling</h3>
                </div>
            </div>
        </div>
        <!-- message sender ends -->

        <!-- post starts -->
        <ul th:each="post: ${posts}" style="padding-left:0;">
            <div class="post">
                <div class="post__top">
                    <img class="user__avatar post__avatar"
                         th:src="${post.getProfileImage()}" alt="" />
                    <div class="post__topInfo">
                        <!-- post name -->
                        <h3>
                            <div>
                                <a th:href="@{/users/{username}(username=${post.getUsername()})}" style=" color: #000000; text-decoration:none;">
                                    <span th:text="${post.getUsername()}"></span></a>
                            </div>
                        </h3>
                        <!-- time of post-->
                        <p class="anchor-time"> Posted: <a href="#" class="anchor-time" th:text="${post.stamp}"></a></p>
                    </div>
                </div>

                <div class="post__bottom">
                    <!-- message-->
                    <section class="post-body">
                        <!--                        Posts Content here-->
                        <a th:href="@{/posts/{id}(id=${post.getPostID()})}" th:object="${post}" style=" color: #000000; text-decoration:none;">
                            <p th:text="${post.getContent()}"/></a>
                    </section>
<!--                    <span th:if="${#authentication.getName()} == ${post.username}">-->
<!--                            <form th:action="@{/posts/{id}(id=${post.getPostID()})}" th:object="${post}">-->
<!--                                <button type="submit" value="Submit">edit</button>-->
<!--                            </form></span>-->
                </div>

                <div class="post__image">
                    <img th:style="post__image" th:src="${post.getPostImage()}"
                         alt="" />
                </div>
                <!-- likes-->
                <section class="post-footer">
                    <a th:text="${post.getLike_count()}"></a>
                </section>

                <div class="post__options">
                    <div class="post__option">
                        <form id="likepost" onclick="likeFunction()" th:action="@{/posts/{id}/like(id=${post.getPostID()})}" method="post">
                            <span class="material-icons" style="margin-right:10px;"> thumb_up </span>
                            <input class="remove_style" type="submit" value="Yess">
                        </form>
                    </div>

                    <div class="post__option" id="commentDIV">
                        <a th:href="@{/posts/{id}(id=${post.getPostID()})}" th:object="${post}" style=" color: #000000; text-decoration:none;">
                            <span class="material-icons"> chat_bubble_outline </span>
                            <p>Comment</p></a>
                    </div>

                    <div class="post__option">
                        <span class="material-icons"> near_me </span>
                        <p>Share</p>
                    </div>
                </div>

                <!--                comment section -->
                <ul th:each="comment: ${comments}" style="padding-left:0;">
                    <span th:if="${comment.getPostID()} == ${post.getPostID()}">
                    <div class="post__top">
                        <img class="user__avatar post__avatar"
                             th:src="${comment.getProfile_image()}" alt="" />
                        <div class="post__topInfo">
                            <!-- post name -->
                            <h5>
                                <div>
                                    <span th:text="${comment.getUsername()}"></span>
                                </div>
                            </h5>

                            <div class="post__bottom">
                                <!-- message-->
                                <section class="post-body">
                                    <!--                        Posts Content here-->
                                    <p th:text="${comment.getContent()}"/>
                                </section>
                            </div>
                            <!-- time of post-->
                            <p class="anchor-time"> Posted: <a href="#" class="anchor-time" th:text="${comment.getStamp()}"></a></p>
                        </div>
                    </div>
                    </span>
                </ul>

            </div>

        </ul>

    </div>
    <!-- feed ends -->

    <div style="flex: 0.33" class="widgets">
        <div class="fb-page" data-href="https://www.facebook.com/facebook" data-tabs="timeline" data-width="500"
             data-height="1000" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false"
             data-show-facepile="true">
            <blockquote cite="https://www.facebook.com/facebook" class="fb-xfbml-parse-ignore">
                <a href="https://www.facebook.com/facebook">Facebook</a>
            </blockquote>

        </div>

    </div>
</div>
<!-- main body ends -->


<!-- script settings do not amend-->
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v10.0"
        nonce="zUxEq08J"></script>
<script src="/js/script_index.js"></script>
</body>
</html>